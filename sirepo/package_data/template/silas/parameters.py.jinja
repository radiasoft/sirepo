from pykern.pkcollections import PKDict
from pykern.pkdebug import pkdp, pkdc, pkdlog
from rslaser.pulse import pulse
from rslaser.utils import srwl_uti_data


def _build_pulse():
    return pulse.LaserPulse(
        params=PKDict(
            chirp={{ chirp }},
            dist_waist={{ distFromWaist }},
            mx={{ mx }},
            my={{ my }},
            nslice={{ numSlices }},
            num_sig_long={{ num_sig_long }},
            num_sig_trans={{ num_sig_trans }},
            nx_slice={{ nx_slice }},
            ny_slice={{ ny_slice }},
            pad_factor={{ padFactor }},
            photon_e_ev={{ photonEnergy }},
            poltype={{ polarization }},
            pulseE={{ totalEnergy }},
            sigx_waist={{ sigx_waist }},
            sigy_waist={{ sigy_waist }},
            tau_fwhm={{ tauFWHM }},
        ),
    )

p = _build_pulse()
s = p.slice[0]
ph = s.n_photons_2d


z = srwl_uti_data.calc_int_from_elec(p.slice_wfr(0)).tolist()
